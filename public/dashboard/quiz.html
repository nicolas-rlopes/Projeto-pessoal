<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeagueTech | Quiz</title>
    <link rel="stylesheet" href="./../css/estilo.css">
    <link rel="stylesheet" href="./../css/dashboards.css">
    <link rel="shortcut icon" href="../assets/icon/favicon2.ico" type="image/x-icon">
</head>

<body>
    <!--Header-->

    <!--Header-->
    <div class="fundo_quiz">
        <div class="aviso_quiz" id="aviso_quiz" style="display: none;">
            <span id="mensagem_erro">Preencha todos os campos antes de finalizar o Quiz!</span>
            <div id="erro_imagem"><img src="./../css/imagens/erro_imagem.png" alt=""></div>
        </div>
        <div class="conteudo_quiz">
            <div class="janela">
                <div class="header">
                    <div class="usuario">
                        <div class="hello">
                            <img src="" alt="" id="campeao_do_jogador">
                            <h3><span id="b_usuario">usuário</span>!</h3>
                        </div>
                    </div>

                    <div class="header-left">

                        <div class="btn-nav">
                            <a href="./pos-cadastro.html">
                                <h3>Inicial</h3>
                            </a>
                        </div>

                        <div class="btn-nav">
                            <a href="./perfil.html">
                                <h3>Perfil</h3>
                            </a>
                        </div>

                        <div class="btn-nav">
                            <a href="./minigame.html">
                                <h3>Minigame</h3>
                            </a>
                        </div>

                        <div class="btn-nav">
                            <a href="./quiz.html">
                                <h3>Quiz</h3>
                            </a>
                        </div>

                        <div class="btn-logout" onclick="limparSessao()">
                            <h3>Sair</h3>
                        </div>
                    </div>
                </div>
            </div>
            <h1 class="titulo_quiz">Quiz de conhecimento de League of Legends</h1>
            <div class="caixa">
                <div class="quiz" id="questao1">
                    <h2>Questão 1</h2>
                    <h3>Qual a data de lançamento do jogo?</h3>
                    <span><b>A)</b> <input type="radio" id="input_Q1_A" name="questao1" value="27 de outubro de 2009">
                        27 de outubro de 2009 </span>
                    <span><b>B)</b> <input type="radio" id="input_Q1_B" name="questao1" value="20 de novembro de 2010">
                        20 de novembro de 2010 </span>
                    <span><b>C)</b> <input type="radio" id="input_Q1_C" name="questao1" value="27 de outubro de 2013">
                        27 de outubro de 2013 </span>
                    <span><b>D)</b> <input type="radio" id="input_Q1_D" name="questao1" value="19 de maio de 2010"> 19
                        de maio de 2010 </span>
                </div>
            </div>
            <div class="caixa">
                <div class="quiz" id="questao2">
                    <h2>Questão 2</h2>
                    <h3>Quantas funções existem em uma equipe?</h3>
                    <div class="mapa">
                        <img src="./../css/imagens/summoners-rift-map.webp" alt="">
                    </div>
                    <span><b>A)</b> <input type="radio" id="input_Q2_A" name="questao2" value="4"> 4 </span>
                    <span><b>B)</b> <input type="radio" id="input_Q2_B" name="questao2" value="5"> 5 </span>
                    <span><b>C)</b> <input type="radio" id="input_Q2_C" name="questao2" value="3"> 3 </span>
                    <span><b>D)</b> <input type="radio" id="input_Q2_D" name="questao2" value="1"> 1 </span>
                </div>
            </div>
            <div class="caixa">
                <div class="quiz" id="questao3">
                    <h2>Questão 3</h2>
                    <h3>Quantos campeões existem atualmente dentro do jogo?</h3>
                    <span><b>A)</b> <input type="radio" id="input_Q3_A" name="questao3" value="130"> 130 </span>
                    <span><b>B)</b> <input type="radio" id="input_Q3_B" name="questao3" value="135"> 135 </span>
                    <span><b>C)</b> <input type="radio" id="input_Q3_C" name="questao3" value="140"> 140 </span>
                    <span><b>D)</b> <input type="radio" id="input_Q3_D" name="questao3" value="145"> 145 </span>
                </div>
            </div>
            <div class="caixa">
                <div class="quiz" id="questao4">
                    <h2>Questão 4</h2>
                    <h3>Como faz para ganhar uma partida de League of Legends?</h3>
                    <span><b>A)</b> <input type="radio" id="input_Q4_A" name="questao4"
                            value="Abatendo a maior quantidade de inimigos"> Abatendo a maior quantidade de inimigos
                    </span>
                    <span><b>B)</b> <input type="radio" id="input_Q4_B" name="questao4"
                            value="Protegendo as suas torres"> Protegendo as suas torres </span>
                    <span><b>C)</b> <input type="radio" id="input_Q4_C" name="questao4"
                            value="Destruindo o Nexus do inimigo"> Destruindo o Nexus do inimigo </span>
                    <span><b>D)</b> <input type="radio" id="input_Q4_D" name="questao4"
                            value="Destruindo as torres do adversário"> Destruindo as torres do adversário </span>
                </div>
            </div>
            <div class="caixa">
                <div class="quiz" id="questao5">
                    <h2>Questão 5</h2>
                    <h3>Qual o nome do monstro que nasce aos 20:00 minutos de jogo?</h3>
                    <span><b>A)</b> <input type="radio" id="input_Q5_A" name="questao5" value="Barão NaShor"> Barão
                        NaShor </span>
                    <span><b>B)</b> <input type="radio" id="input_Q5_B" name="questao5" value="Golens"> Golens </span>
                    <span><b>C)</b> <input type="radio" id="input_Q5_C" name="questao5" value="Dragão"> Dragão </span>
                    <span><b>D)</b> <input type="radio" id="input_Q5_D" name="questao5" value="Dragão Ancião"> Dragão
                        Ancião </span>
                </div>
            </div>
            <div class="caixa">
                <div class="quiz" id="questao6">
                    <h2>Questão 6</h2>
                    <h3>Dois campos específicos da Selva são conhecidos pela sua cor, sendo elas:</h3>
                    <span><b>A)</b> <input type="radio" id="input_Q6_A" name="questao6"
                            value="Green e Red | Verde e Vermelho "> Green e Red | Verde e Vermelho </span>
                    <span><b>B)</b> <input type="radio" id="input_Q6_B" name="questao6"
                            value="Golden e Yellow | Dourado e Amarelo "> Golden e Yellow | Dourado e Amarelo </span>
                    <span><b>C)</b> <input type="radio" id="input_Q6_C" name="questao6"
                            value="Blue e Purple | Azul e Roxo "> Blue e Purple | Azul e Roxo </span>
                    <span><b>D)</b> <input type="radio" id="input_Q6_D" name="questao6"
                            value="Blue e Red | Azul e Vermelho"> Blue e Red | Azul e Vermelho </span>
                </div>
            </div>
            <div class="caixa">
                <div class="quiz" id="questao7">
                    <h2>Questão 7</h2>
                    <h3>A partir de que nível um jogador pode jogar Filas Ranqueadas/Competitivas?</h3>
                    <span><b>A)</b> <input type="radio" id="input_Q7_A" name="questao7" value="Nível 50"> Nível 50
                    </span>
                    <span><b>B)</b> <input type="radio" id="input_Q7_B" name="questao7" value="Nível 40"> Nível 40
                    </span>
                    <span><b>C)</b> <input type="radio" id="input_Q7_C" name="questao7" value="Nível 30"> Nível 30
                    </span>
                    <span><b>D)</b> <input type="radio" id="input_Q7_D" name="questao7" value="Nível 20"> Nível 20
                    </span>
                </div>
            </div>
            <div class="caixa">
                <div class="quiz" id="questao8">
                    <h2>Questão 8</h2>
                    <h3>Caso algum jogador tenha um mal comportamneto durante a partida, qual seria a melhor situação a
                        se seguir:</h3>
                    <span><b>A)</b> <input type="radio" id="input_Q8_A" name="questao8"
                            value="Reporta-lo ao final da partida e esperar que ele seja punido"> Reporta-lo ao final da
                        partida e esperar que ele seja punido </span>
                    <span><b>B)</b> <input type="radio" id="input_Q8_B" name="questao8"
                            value="Discutir com o mesmo fazendo ameaças e xingando de volta"> Discutir com o mesmo
                        fazendo ameaças e xingando de volta </span>
                    <span><b>C)</b> <input type="radio" id="input_Q8_C" name="questao8"
                            value="Não fazer nada e apenas observar"> Não fazer nada e apenas observar </span>
                    <span><b>D)</b> <input type="radio" id="input_Q8_D" name="questao8"
                            value="Discutir com o mesmo fazendo ameaças e xingando de volta e ao final da partida reporta-lo">
                        Discutir com o mesmo fazendo ameaças e xingando de volta e ao final da partida reporta-lo</span>
                </div>
            </div>
            <div class="caixa">
                <div class="quiz" id="questao9">
                    <h2>Questão 9</h2>
                    <h3>Quantos Elos/Ranques existem ao total?</h3>
                    <span><b>A)</b> <input type="radio" id="input_Q9_A" name="questao9" value="5 Ranques"> 5 Ranques
                    </span>
                    <span><b>B)</b> <input type="radio" id="input_Q9_B" name="questao9" value="10 Ranques"> 10 Ranques
                    </span>
                    <span><b>C)</b> <input type="radio" id="input_Q9_C" name="questao9" value="12 Ranques"> 12 Ranques
                    </span>
                    <span><b>D)</b> <input type="radio" id="input_Q9_D" name="questao9" value="8 Ranques"> 8 Ranques
                    </span>
                </div>
            </div>
            <div class="caixa">
                <div class="quiz" id="questao10">
                    <h2>Questão 10</h2>
                    <h3>Quantas torres existem no mapa de Summoner's Rif</h3>
                    <span><b>A)</b> <input type="radio" id="input_Q10_A" name="questao10" value="11 Torres"> 11 Torres
                    </span>
                    <span><b>B)</b> <input type="radio" id="input_Q10_B" name="questao10" value="9 Torres"> 9 Torres
                    </span>
                    <span><b>C)</b> <input type="radio" id="input_Q10_C" name="questao10" value="22 Torres"> 22 Torres
                    </span>
                    <span><b>D)</b> <input type="radio" id="input_Q10_D" name="questao10" value="18 Torres"> 18 Torres
                    </span>
                </div>
            </div>
            <div class="resposta_quiz">
                <button class="botao" onclick="finalizar()">Finalizar</button>
                <div class="div_mensagem_escondida">
                    <div id="div_mensagem"></div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>

<script>
    b_usuario.innerHTML = sessionStorage.NOME_USUARIO;
    var rota_jogador = Number(sessionStorage.ID_ROTA);

    var imagem_do_campeao = document.getElementById('campeao_do_jogador')

    window.onload = exibirFotoPerfil(); 

    function exibirFotoPerfil() {
        
        if (rota_jogador == 1) {
            imagem_do_campeao.src = './../css/imagens/Darius.jpg'

        } else if(rota_jogador == 2) {
            imagem_do_campeao.src = './../css/imagens/Rengar.jpg'

        } else if (rota_jogador == 3) {
            imagem_do_campeao.src = './../css/imagens/yasuo.jpeg'

        } else if (rota_jogador == 4) {
            imagem_do_campeao.src = './../css/imagens/Draven.jpeg'

        } else {
            imagem_do_campeao.src = './../css/imagens/Leona.jpg'

        }
    }

    var respostas_certas = ['27 de outubro de 2009', '5', '140', 'Destruindo o Nexus do inimigo', 'Barão NaShor', 'Blue e Red | Azul e Vermelho', 'Nível 30', 'Reporta-lo ao final da partida e esperar que ele seja punido', '10 Ranques', '22 Torres'];
    var respostas_inseridas = [];

    function finalizar() {
        var acertosVar = 0

        respostas_inseridas = [];

        for (var index = 1; index <= 10; index++) {

            var questao = document.getElementsByName("questao" + index); // mudando a questão com concatenação  

            for (var indexQuestao = 0; indexQuestao < questao.length; indexQuestao++) {

                if (questao[indexQuestao].checked) { // ver qual das posições está checada 0, 1, 2 ou 3
                    respostas_inseridas.push(questao[indexQuestao].value) // inserir o TEXTO
                } 
            }
        }

        if (respostas_inseridas.length < 10) {
            aviso_quiz.style.display = 'block';

        } else {
            aviso_quiz.style.display = 'none';

            for (var index = 0; index < respostas_certas.length; index++) {
                var resposta_certa_atual = respostas_certas[index];
                var resposta_inserida_atual = respostas_inseridas[index];

                if (resposta_certa_atual == resposta_inserida_atual) {
                    acertosVar++
                }
            }

            if (acertosVar == 10) {
                div_mensagem.innerHTML = `Você acertou ${acertosVar} - Você acertou todas as questões <b style="color: goldenrod;">CAMPEÃO</b>`
            } else if (acertosVar >= 6) {
                div_mensagem.innerHTML = `Você acertou ${acertosVar} - Estamos quase lá Invocador!`
            } else {
                div_mensagem.innerHTML = `Você acertou ${acertosVar} - Vamos melhorar nesse conhecimento Invocador!`
            }

            var errosVar = 10 - acertosVar;
            var fkUsuarioVar = sessionStorage.ID_USUARIO;

            if (acertosVar < 0 || acertosVar > 10) {
                alert('O quiz esta com menos de 0 ou mais de 10 acertos')
            } else {
                fetch("/usuarios/acrescentar", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        // crie um atributo que recebe o valor recuperado aqui
                        // Agora vá para o arquivo routes/usuario.js
                        acertosServer: acertosVar,
                        errosServer: errosVar,
                        fkUsuarioServer: fkUsuarioVar
                    }),
                });
            }
        }



    }

</script>